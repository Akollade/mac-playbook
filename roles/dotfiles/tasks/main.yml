---
- name: Clone oh-my-zsh repo
  git:
    repo: https://github.com/robbyrussell/oh-my-zsh.git
    dest: ~/.oh-my-zsh
    force: yes

- name: Clone syntax-highlighting plugin
  git:
    repo: https://github.com/zsh-users/zsh-syntax-highlighting.git
    dest: ~/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting
    force: yes

- name: Clone zsh-autosuggestions plugin
  git:
    repo: https://github.com/zsh-users/zsh-autosuggestions
    dest: ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions
    force: yes

- name: Clone symfony plugin
  git:
    repo: https://github.com/TheGrowingPlant/symfony.plugin.zsh.git
    dest: ~/.oh-my-zsh/custom/plugins/symfony
    force: yes

- name: deploy .zshrc
  template:
    src: zshrc.j2
    dest: ~/.zshrc

- name: deploy .zsh_aliases
  template:
    src: zsh_aliases.j2
    dest: ~/.zsh_aliases

- name: ensure user config file exists
  copy:
    content: ""
    dest: ~/.zshrc.local
    force: no

- name: set zsh as default shell
  user:
    name: "{{ lookup('env','USER') }}"
    shell: /bin/zsh
  become: true

- name: Add SSH config
  copy:
    content: "{{ ssh_config }}"
    dest: ~/.ssh/config
  when: ssh_config is defined and ssh_config != ''

- name: deploy .sqliterc
  copy:
    src: sqliterc
    dest: ~/.sqliterc

- name: deploy global editorconfig
  template:
    src: editorconfig.j2
    dest: ~/.editorconfig
